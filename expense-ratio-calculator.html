<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-5SF9L94K');</script>
  <!-- End Google Tag Manager -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Expense Ratio Calculator - SaveBest.org</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: 'Helvetica Neue', sans-serif;
      background-color: #ffffff;
      margin: 0;
      padding: 0;
      color: #333;
      line-height: 1.6;
    }
    .header {
      background-color: #ffffff;
      border-bottom: 1px solid #e6e6e6;
      padding: 1rem 0;
      position: sticky;
      top: 0;
      z-index: 100;
    }
    .nav-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .logo img {
      max-width: 180px;
      height: auto;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 2rem;
    }
    h1 {
      text-align: center;
      margin-bottom: 1rem;
    }
    p.intro {
      text-align: center;
      margin-bottom: 2rem;
    }
    .calculator {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
      margin-bottom: 2rem;
    }
    .calculator label {
      display: flex;
      flex-direction: column;
      font-weight: 500;
    }
    .calculator input {
      padding: 0.5rem;
      margin-top: 0.25rem;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    .calculator button {
      grid-column: 1 / -1;
      padding: 0.75rem;
      background-color: #3f6b5d;
      color: white;
      border: none;
      border-radius: 30px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: bold;
      transition: background-color 0.2s;
    }
    .calculator button:hover {
      background-color: #2d4f43;
    }
    .results {
      display: flex;
      justify-content: space-around;
      margin-top: 2rem;
      font-size: 1.2rem;
      font-weight: 600;
    }
    canvas {
      max-width: 100%;
    }
    .content-section {
      max-width: 800px;
      margin: 0 auto 3rem;
      padding: 0 2rem;
      text-align: left;
    }
    .content-section h2 {
      font-size: 1.8rem;
      font-weight: bold;
      color: #333;
      margin-bottom: 1rem;
    }
    .content-section h3 {
      font-size: 1.3rem;
      color: #3f6b5d;
      margin-top: 1.5rem;
    }
    .brand-card {
      border: 1px solid #e6e6e6;
      border-radius: 8px;
      padding: 1.5rem;
      margin-bottom: 2rem;
      text-align: center;
    }
    .brand-card img {
      max-width: 200px;
      height: auto;
      margin-bottom: 1rem;
    }
    .cta-button {
      display: inline-block;
      padding: 1rem 2rem;
      font-size: 1.1rem;
      background-color: #3f6b5d;
      color: white;
      text-decoration: none;
      border-radius: 30px;
      font-weight: bold;
      transition: background-color 0.2s;
      cursor: pointer;
    }
    .cta-button:hover {
      background-color: #2d4f43;
    }
  </style>
</head>
<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5SF9L94K" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
  <div class="header">
    <div class="nav-container">
      <div class="logo"><a href="/"><img src="/assets/logo.png" alt="SaveBest.org"></a></div>
    </div>
  </div>
  <div class="container">
    <h1>Expense Ratio Calculator</h1>
    <p class="intro">Expense ratios are the annual fees charged by mutual funds or ETFs. Even a small difference can have a big impact on your investment over time. Use this calculator to see how fees affect your future balance.</p>
    <div class="calculator">
      <label>Initial Investment ($)
        <input type="number" id="initial" value="10000">
      </label>
      <label>Monthly Contribution ($)
        <input type="number" id="contribution" value="1000">
      </label>
      <label>Years
        <input type="number" id="years" value="30">
      </label>
      <label>Expected Annual ROI (%)
        <input type="number" id="roi" value="8">
      </label>
      <label>Expense Ratio A (%)
        <input type="number" id="erA" value="0.1" step="0.01">
      </label>
      <label>Expense Ratio B (%)
        <input type="number" id="erB" value="0.5" step="0.01">
      </label>
      <button id="calculate">Calculate</button>
    </div>
    <canvas id="resultChart" height="100"></canvas>
    <div class="results">
      <div>Final Value A: $<span id="finalA">0</span></div>
      <div>Final Value B: $<span id="finalB">0</span></div>
      <div>Difference: $<span id="difference">0</span></div>
    </div>
  </div>
  <section class="content-section">
    <h2>Understanding Expense Ratios</h2>
    <p>Expense ratios represent the annual fees that mutual funds and ETFs charge their investors. Even fractions of a percent can add up over decades, reducing the power of compounding in your portfolio.</p>
    <h3>Finding Yours</h3>
    <p>You can find a fund’s expense ratio by looking at the fund details in your brokerage account or on the fund’s website. To estimate your portfolio’s overall cost, multiply each holding’s expense ratio by its share of your total investments and add the results together.</p>
    <h3>Common Pitfalls</h3>
    <p>Be wary of high‑fee mutual funds and hidden 12b‑1 marketing fees. Always compare similar funds and remember that higher fees don’t guarantee better performance.</p>
    <h3>Mutual Funds vs. ETFs</h3>
    <p>ETFs typically offer lower expense ratios than actively managed mutual funds. When possible, choose low‑fee index funds or ETFs to keep more of your money working for you.</p>
  </section>
  <section class="content-section">
    <h2>Tools to Track and Reduce Fees</h2>
    <div class="brand-card">
      <img src="/assets/empower-logo.svg" alt="Empower logo">
      <p>Empower is a free personal finance dashboard where you can track net worth, see all your investments in one place, and get alerts if your expense ratios are too high.</p>
      <a href="#" class="cta-button" onclick="redirectToEmpower()">Track with Empower</a>
    </div>
    <div class="brand-card">
      <h3>M1 Finance</h3>
      <p>M1 Finance is a free investment platform with easy portfolio management and a wide selection of low‑fee ETFs and mutual funds.</p>
      <a href="#" class="cta-button" onclick="redirectToM1()">Invest with M1 Finance</a>
    </div>
  </section>
  <script>
    let chart;
    function formatMoney(v){return v.toLocaleString(undefined,{minimumFractionDigits:2,maximumFractionDigits:2});}
    function calculate(){
      const initial=parseFloat(document.getElementById('initial').value)||0;
      const contribution=parseFloat(document.getElementById('contribution').value)||0;
      const years=parseFloat(document.getElementById('years').value)||0;
      const roi=parseFloat(document.getElementById('roi').value)||0;
      const erA=parseFloat(document.getElementById('erA').value)||0;
      const erB=parseFloat(document.getElementById('erB').value)||0;
      const months=Math.round(years*12);
      const monthlyA=(roi-erA)/12/100;
      const monthlyB=(roi-erB)/12/100;
      let balanceA=initial, balanceB=initial;
      const labels=[],dataA=[],dataB=[];
      for(let m=1;m<=months;m++){
        balanceA=balanceA*(1+monthlyA)+contribution;
        balanceB=balanceB*(1+monthlyB)+contribution;
        if(m%12===0){
          labels.push(m/12);
          dataA.push(balanceA);
          dataB.push(balanceB);
        }
      }
      document.getElementById('finalA').textContent=formatMoney(balanceA);
      document.getElementById('finalB').textContent=formatMoney(balanceB);
      document.getElementById('difference').textContent=formatMoney(balanceA-balanceB);
      const ctx=document.getElementById('resultChart').getContext('2d');
      if(chart){chart.destroy();}
      chart=new Chart(ctx,{
        type:'line',
        data:{labels:labels,datasets:[
          {label:`Expense Ratio ${erA}%`,data:dataA,borderColor:'#3f6b5d',fill:false},
          {label:`Expense Ratio ${erB}%`,data:dataB,borderColor:'#d32f2f',fill:false}
        ]},
        options:{
          responsive:true,
          scales:{
            x:{title:{display:true,text:'Years'}},
            y:{title:{display:true,text:'Balance ($)'},ticks:{callback:value=>'$'+value.toLocaleString()}}
          }
        }
      });
    }
    document.getElementById('calculate').addEventListener('click',calculate);
    calculate();
  </script>
  <script>
    // User ID and gclid tracking
    function generateUserId() {
      const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
      let result = '';
      for (let i = 0; i < 20; i++) {
        result += chars.charAt(Math.floor(Math.random() * chars.length));
      }
      return result;
    }

    function getOrCreateUserId() {
      let userId = localStorage.getItem('sabeid');
      if (!userId) {
        userId = generateUserId();
        localStorage.setItem('sabeid', userId);
      }
      return userId;
    }

    function getGclid() {
      const urlParams = new URLSearchParams(window.location.search);
      let gclid = urlParams.get('gclid');
      if (gclid) {
        const expiryDate = new Date();
        expiryDate.setDate(expiryDate.getDate() + 90);
        document.cookie = `gclid=${gclid}; expires=${expiryDate.toUTCString()}; path=/; SameSite=Lax`;
      }
      if (!gclid) {
        const cookies = document.cookie.split(';');
        for (let cookie of cookies) {
          const [name, value] = cookie.trim().split('=');
          if (name === 'gclid') {
            gclid = value;
            break;
          }
        }
      }
      return gclid || '';
    }

    function redirectToEmpower() {
      const sabeid = getOrCreateUserId();
      const gclid = getGclid();

      // Track the redirect with default value when assets are unknown
      if (typeof dataLayer !== 'undefined') {
        dataLayer.push({
          'event': 'redirect_click',
          'redirect_destination': 'empower',
          'user_id': sabeid,
          'value': 5
        });
      }

      const baseUrl = 'https://track.flexlinkspro.com/g.ashx?foid=156074.13439.1058727&trid=1368848.157618&foc=16&fot=9999&fos=6';
      const url = `${baseUrl}&fobs=${sabeid}&fobs2=${gclid}`;
      window.open(url, '_blank');
    }

    function redirectToM1() {
      const sabeid = getOrCreateUserId();
      const gclid = getGclid();
      const baseUrl = 'https://m1.finance/savebest';
      const url = `${baseUrl}?fobs=${sabeid}&fobs2=${gclid}`;
      window.open(url, '_blank');
    }

    document.addEventListener('DOMContentLoaded', function() {
      const userId = getOrCreateUserId();
      if (typeof dataLayer !== 'undefined') {
        dataLayer.push({
          'event': 'page_view',
          'page_title': 'Expense Ratio Calculator',
          'user_id': userId
        });
      }
    });
  </script>
</body>
</html>
